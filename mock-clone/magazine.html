<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é›œèªŒå–®å­—é ç¿’å·¥å…·ï¼ˆ144 å­— / ä½” 5%ï½10%ï¼‰</title>
    <style>
        :root {
            color-scheme: light;
            --primary: #1a237e;
            --secondary: #3f51b5;
            --light-bg: #eef1ff;
            --accent: #ff8a65;
            --card-bg: #ffffff;
            --border-radius: 14px;
            --transition: 0.25s ease;
            font-size: 16px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 32px 24px 48px;
            background: linear-gradient(180deg, #f6f7ff 0%, #ffffff 40%, #f3f5ff 100%);
            font-family: "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
            color: #1a1a1a;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 22px;
            border-radius: 18px;
            background: linear-gradient(135deg, #3949ab, #5c6bc0);
            color: #ffffff;
            font-weight: 700;
            text-decoration: none;
            border: none;
            box-shadow: 0 16px 28px rgba(63, 81, 181, 0.28);
            transition: transform 0.18s ease, box-shadow 0.18s ease;
            margin: 0 0 28px;
        }

        .back-link::before {
            content: "â†";
            font-size: 18px;
        }

        .back-link:hover,
        .back-link:focus-visible {
            transform: translateY(-2px);
            box-shadow: 0 20px 36px rgba(63, 81, 181, 0.33);
        }

        .back-link:focus-visible {
            outline: 3px solid rgba(92, 107, 192, 0.6);
            outline-offset: 5px;
        }

        h1 {
            margin: 0 0 8px;
            font-size: clamp(28px, 3vw, 36px);
            color: var(--primary);
        }

        .sub-heading {
            margin: 0 0 24px;
            font-size: 16px;
            color: #4c4f70;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 20px;
        }

        .toolbar>* {
            flex: 1 1 220px;
        }

        .toolbar .stats {
            background: rgba(63, 81, 181, 0.08);
            border: 1px solid rgba(63, 81, 181, 0.2);
            border-radius: var(--border-radius);
            padding: 18px 20px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            min-width: 240px;
        }

        .stats strong {
            font-size: 18px;
            color: var(--primary);
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 14px 16px 14px 44px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(26, 35, 126, 0.2);
            background: #fff;
            font-size: 16px;
            box-shadow: 0 6px 14px rgba(26, 35, 126, 0.08);
            outline: none;
            transition: border var(--transition), box-shadow var(--transition);
        }

        .search-box input:focus {
            border-color: var(--secondary);
            box-shadow: 0 10px 20px rgba(63, 81, 181, 0.15);
        }

        .search-icon {
            position: absolute;
            top: 50%;
            left: 16px;
            transform: translateY(-50%);
            font-size: 18px;
            color: rgba(26, 35, 126, 0.6);
        }

        .filter-panel {
            background: rgba(26, 35, 126, 0.06);
            border-radius: var(--border-radius);
            padding: 16px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .filter-panel h2 {
            margin: 0;
            font-size: 16px;
            color: var(--primary);
        }

        .chip-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .chip {
            padding: 8px 14px;
            border-radius: 999px;
            background: #fff;
            border: 1px solid rgba(26, 35, 126, 0.2);
            font-size: 14px;
            cursor: pointer;
            transition: all var(--transition);
        }

        .chip.active {
            background: var(--secondary);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 6px 16px rgba(63, 81, 181, 0.25);
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 18px;
        }

        .quick-actions button {
            flex: 1 1 180px;
            border: none;
            border-radius: 12px;
            padding: 12px 18px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, #3949ab, #5c6bc0);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform var(--transition), box-shadow var(--transition), filter var(--transition);
        }

        .quick-actions button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(63, 81, 181, 0.25);
        }

        .quick-actions button.secondary {
            background: linear-gradient(135deg, #ff7043, #ff8a65);
        }

        .quick-actions button.outline {
            background: #fff;
            color: var(--secondary);
            border: 1px solid rgba(63, 81, 181, 0.3);
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
        }

        .word-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 18px 20px 22px;
            box-shadow: 0 10px 22px rgba(26, 35, 126, 0.12);
            border: 1px solid rgba(26, 35, 126, 0.08);
            display: flex;
            flex-direction: column;
            gap: 12px;
            transition: transform var(--transition), box-shadow var(--transition), border var(--transition);
        }

        .word-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 30px rgba(26, 35, 126, 0.16);
            border-color: rgba(26, 35, 126, 0.22);
        }

        .word-card.learned {
            border: 1px solid rgba(46, 125, 50, 0.6);
            box-shadow: 0 12px 26px rgba(76, 175, 80, 0.22);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .word-index {
            font-size: 14px;
            color: rgba(26, 35, 126, 0.6);
            font-weight: 600;
            letter-spacing: 1px;
        }

        .mark-btn {
            background: rgba(63, 81, 181, 0.1);
            border: none;
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 13px;
            cursor: pointer;
            color: var(--secondary);
            transition: all var(--transition);
        }

        .mark-btn.learned {
            background: rgba(76, 175, 80, 0.18);
            color: #2e7d32;
        }

        .word-card h2 {
            margin: 0;
            font-size: 26px;
            color: var(--primary);
        }

        .pos-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(63, 81, 181, 0.12);
            color: var(--secondary);
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 600;
            width: fit-content;
        }

        .meaning {
            margin: 0;
            font-size: 16px;
            line-height: 1.6;
            color: #2c2c2c;
        }

        .meaning.hidden {
            color: rgba(44, 44, 44, 0.3);
            font-style: italic;
        }

        .sentence {
            margin: 0;
            font-size: 15px;
            line-height: 1.55;
            color: #424564;
            border-left: 4px solid rgba(63, 81, 181, 0.25);
            padding-left: 12px;
        }

        mark.fill {
            background: rgba(255, 138, 101, 0.3);
            color: #d84315;
            padding: 0 4px;
            border-radius: 4px;
        }

        .empty-state {
            margin-top: 40px;
            text-align: center;
            padding: 36px 24px;
            border-radius: 18px;
            background: rgba(63, 81, 181, 0.08);
            border: 1px dashed rgba(26, 35, 126, 0.2);
            color: rgba(26, 35, 126, 0.7);
            font-size: 16px;
        }

        @media (max-width: 640px) {
            body {
                padding: 24px 18px 36px;
            }

            .toolbar>* {
                flex: 1 1 100%;
            }

            .quick-actions button {
                flex: 1 1 100%;
            }
        }
    </style>
</head>

<body>
    <a class="back-link" href="home.html">â† å›åˆ°é¦–é </a>
    <header>
        <h1>é›œèªŒå–®å­—é ç¿’å·¥å…·</h1>
        <p class="sub-heading">å¿«é€Ÿé ç¿’ 144 å€‹é›œèªŒé‡é»å–®å­—ï¼ŒæŒæ¡å  5%ï½10% çš„è©•é‡åˆ†æ•¸ï¼›å–„ç”¨æœå°‹ã€ç¯©é¸èˆ‡ä¾‹å¥ç·´ç¿’ï¼ŒåŠ æ·±è¨˜æ†¶ã€‚</p>
    </header>

    <section class="toolbar">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input id="searchInput" type="search" placeholder="æœå°‹è‹±æ–‡ã€ä¸­æ–‡æˆ–ä¾‹å¥é—œéµå­—ï¼ˆä¾‹å¦‚ï¼šsnowã€é›ªã€mountainï¼‰" />
        </div>

        <div class="stats" id="statsPanel">
            <div><strong>ç¸½å­—æ•¸ï¼š</strong><span id="totalWords">0</span> å­—</div>
            <div><strong>ç›®å‰é¡¯ç¤ºï¼š</strong><span id="visibleWords">0</span> å­—</div>
            <div><strong>å·²æ¨™è¨˜ç†Ÿæ‚‰ï¼š</strong><span id="learnedWords">0</span> å­—</div>
            <div><strong>è©•é‡å æ¯”ï¼š</strong>5%ï½10%</div>
        </div>

        <div class="filter-panel">
            <h2>è©æ€§ç¯©é¸</h2>
            <div class="chip-group" id="posChips"></div>
        </div>
    </section>

    <section class="quick-actions">
        <button id="toggleChineseBtn" class="outline" type="button">ğŸ‘€ åˆ‡æ›ä¸­æ–‡é¡¯ç¤º</button>
        <button id="toggleBlankBtn" class="outline" type="button">ğŸ“ åˆ‡æ›ä¾‹å¥ï¼ˆå¡«ç©ºï¼å®Œæ•´ï¼‰</button>
        <button id="shuffleBtn" class="secondary" type="button">ğŸ”€ éš¨æ©Ÿæ’åº</button>
        <button id="resetBtn" type="button">ğŸ§½ é‡è¨­ç¯©é¸èˆ‡æ¨™è¨˜</button>
    </section>

    <main id="wordGrid" class="word-grid"></main>

    <template id="wordCardTemplate">
        <article class="word-card">
            <div class="card-header">
                <span class="word-index"></span>
                <button class="mark-btn" type="button"></button>
            </div>
            <h2 class="word-text"></h2>
            <span class="pos-tag"></span>
            <p class="meaning"></p>
            <p class="sentence"></p>
        </article>
    </template>

    <script>
        const rawWords = [
            { word: "snow", clue: "In winter, there is a lot of s_____w in the mountains.", definition: "snow (n.) é›ª" },
            { word: "giant", clue: "This g_____t tree is about five hundred years old.", definition: "giant (adj.) å·¨å¤§çš„" },
            { word: "round", clue: "The little girl has a cute r_____d face.", definition: "round (adj.) åœ“å½¢çš„" },
            { word: "witch", clue: "The w_____h wears a big black hat.", definition: "witch (n.) å·«å©†" },
            { word: "salty", clue: "The soup is too s_____y; you need to add some water.", definition: "salty (adj.) é¹¹çš„" },
            { word: "walks", clue: "The man w_____ks his dog in the park every morning.", definition: "walk (v.) é›(å‹•ç‰©)" },
            { word: "pour", clue: "Please p_____r some hot water into my cup.", definition: "pour (v.) å€’" },
            { word: "secret", clue: "I share my s_____t with my best friend.", definition: "secret (n.) ç¥•å¯†" },
            { word: "life", clue: "Mary enjoys her l_____e on the farm very much.", definition: "life (n.) ç”Ÿæ´»" },
            { word: "trip", clue: "I want to go on a t_____p with my family.", definition: "trip (n.) æ—…è¡Œ" },
            { word: "ice", clue: "My brother likes to drink milk tea with i_____e.", definition: "ice (n.) å†°" },
            { word: "break", clue: "Be careful not to b_____k the glass bowl.", definition: "break (v.) æ‰“ç ´" },
            { word: "river", clue: "Let's row a boat down the r_____r.", definition: "river (n.) æ²³æµ" },
            { word: "rises", clue: "The sun r_____s behind the mountains.", definition: "rise (v.) è³ç«‹ï¼›å‡èµ·" },
            { word: "covers", clue: "In winter, white snow c_____s the roofs of the houses.", definition: "cover (v.) è¦†è“‹" },
            { word: "skin", clue: "After you peel the mango, put the s_____n in the trash bag.", definition: "skin (n.) çš®" },
            { word: "tiny", clue: "Can you see the t_____y ants in the tree?", definition: "tiny (adj.) ç´°å°çš„" },
            { word: "seeds", clue: "The s_____d grow fast with water and sun.", definition: "seed (n.) ç¨®å­" },
            { word: "sour", clue: "Lemon juice is very s_____r, so I always add water and sugar to it.", definition: "sour (adj.) é…¸çš„" },
            { word: "corn", clue: "The c_____n soup tastes nice and sweet.", definition: "corn (n.) ç‰ç±³" },
            { word: "burns", clue: "A wildfire b_____s down the forest and village.", definition: "burn (v.) ç‡’" },
            { word: "war", clue: "Many soldiers die in the w_____r.", definition: "war (n.) æˆ°çˆ­" },
            { word: "stay", clue: "We will s_____y in the town for three days.", definition: "stay (v.) åœç•™ï¼›ç•™ä¸‹" },
            { word: "wins", clue: "The blue team beats the red team and w_____s the game.", definition: "win (v.) ç²å‹ï¼›è´" },
            { word: "attract", clue: "Music shows at the Kaohsiung Music Center a_____t visitors from other cities.", definition: "attract (v.) å¸å¼•" },
            { word: "relax", clue: "We can r_____x at the cafÃ© in the Pier-2 Art Center.", definition: "relax (v.) æ”¾é¬†ï¼›ä¼‘æ¯" },
            { word: "land", clue: "Dave's family owns a large piece of l_____d in the country.", definition: "land (n.) åœŸåœ°ï¼›é™¸åœ°" },
            { word: "type", clue: "I don't like this t_____e of movie.", definition: "type (n.) ç¨®é¡" },
            { word: "bark", clue: "The muntjacs b_____k when they sense danger.", definition: "bark (v.) å å«" },
            { word: "mark", clue: "Please use a red pen to m_____k the wrong answers on your test.", definition: "mark (v.) æ¨™è¨˜" },
            { word: "hang", clue: "The boy helps his mother h_____g the millet to dry.", definition: "hang (v.) åŠæ›" },
            { word: "study", clue: "Students at Padan Asang School s_____y many interesting things.", definition: "study (v.) ç ”è®€" },
            { word: "recording", clue: "Jess is r_____ing her new song in the studio.", definition: "record (v.) éŒ„éŸ³" },
            { word: "dessert", clue: "The chef is good at making d_____t.", definition: "dessert (n.) ç”œé»" },
            { word: "dishes", clue: "We usually have three or four d_____s for dinner.", definition: "dish (n.) èœé¤š" },
            { word: "proud", clue: "The boy is p_____d of his hometown, Kaohsiung.", definition: "proud (adj.) è‡ªè±ªçš„" },
            { word: "island", clue: "We can take a boat to the i_____d.", definition: "island (n.) å³¶å¶¼" },
            { word: "sailor", clue: "My father is a s_____r; he works on a ship.", definition: "sailor (n.) æ°´æ‰‹" },
            { word: "north", clue: "The forest is in the n_____h of the city.", definition: "north (n.) åŒ—æ–¹" },
            { word: "light", clue: "The stars l_____t up the night sky.", definition: "light (v.) é»äº®" },
            { word: "candles", clue: "C_____s give us light when it is dark.", definition: "candle (n.) è Ÿç‡­" },
            { word: "remember", clue: "All Saints' Day is a day to r_____r loved ones.", definition: "remember (v.) è¨˜å¾—" },
            { word: "forget", clue: "Don't f_____t to turn off the lights before you leave.", definition: "forget (v.) å¿˜è¨˜" },
            { word: "bring", clue: "Can you b_____g me a glass of orange juice?", definition: "bring (v.) å¸¶ä¾†" },
            { word: "wonderful", clue: "The sunset looks w_____l with its colorful clouds.", definition: "wonderful (adj.) å¥‡å¦™çš„" },
            { word: "pets", clue: "Jane has two p_____s: a cat and a turtle.", definition: "pet (n.) å¯µç‰©" },
            { word: "tools", clue: "We need t_____s to fix the bike.", definition: "tool (n.) å·¥å…·" },
            { word: "shape", clue: "The cookie is in the s_____e of a star.", definition: "shape (n.) å½¢ç‹€" },
            { word: "popular", clue: "Pizza is very p_____r with children.", definition: "popular (adj.) å—æ­¡è¿çš„" },
            { word: "crowded", clue: "The bus is c_____d with people.", definition: "crowded (adj.) æ“æ“ çš„" },
            { word: "forest", clue: "The f_____t is full of trees and animals.", definition: "forest (n.) æ£®æ—" },
            { word: "traffic", clue: "There is a lot of t_____c in the city.", definition: "traffic (n.) äº¤é€š" },
            { word: "sound", clue: "The s_____d of birds wakes me up in the morning.", definition: "sound (n.) è²éŸ³" },
            { word: "breakfast", clue: "I have sandwiches with milk for b_____t.", definition: "breakfast (n.) æ—©é¤" },
            { word: "protect", clue: "An umbrella can p_____t you from the sun.", definition: "protect (v.) ä¿è­·" },
            { word: "solve", clue: "Can you help me s_____e this math problem?", definition: "solve (v.) è§£æ±º" },
            { word: "safe", clue: "It is not s_____e to go out alone at night.", definition: "safe (adj.) å¹³å®‰çš„" },
            { word: "together", clue: "Let's go to school t_____r.", definition: "together (adv.) ä¸€èµ·" },
            { word: "sport", clue: "Soccer is my favorite s_____t; I like to play it with my friends.", definition: "sport (n.) é‹å‹•" },
            { word: "support", clue: "My parents s_____t me when I try new things.", definition: "support (v.) å¹«åŠ© ; æ”¯æŒ" },
            { word: "provide", clue: "Amy will p_____e some food for the party.", definition: "provide (v.) æä¾›" },
            { word: "daily", clue: "I read the d_____y news online.", definition: "daily (adj.) æ¯æ—¥çš„" },
            { word: "move", clue: "Can you m_____e the chairs to the living room?", definition: "move (v.) ç§»å‹•" },
            { word: "strong", clue: "Jordan is s_____g enough to push a car.", definition: "strong (adj.) å¼·å£¯çš„" },
            { word: "loud", clue: "Please do not make l_____d noises in the library.", definition: "loud (adj.) éŸ¿äº®çš„ ; å¤§è²çš„" },
            { word: "kilometer", clue: "The park is about one k_____r from my house.", definition: "kilometer (n.) å…¬é‡Œ" },
            { word: "row", clue: "It's fun to r_____w a boat on a lake.", definition: "row (v.) åˆ’ (èˆ¹)" },
            { word: "leaves", clue: "L_____s change color in autumn.", definition: "leaf (n.) è‘‰å­ï¼ˆè¤‡æ•¸å½¢ç‚º leavesï¼‰" },
            { word: "become", clue: "Jane wants to b_____e a doctor in the future.", definition: "become (v.) è®Šæˆ" },
            { word: "calendar", clue: "A c_____r shows the days of the month.", definition: "calendar (n.) æœˆæ›† ; æ—¥æ›†" },
            { word: "surprises", clue: "Sandra loves the s_____s from her friends on her birthday.", definition: "surprise (n.) é©šå–œ" },
            { word: "brush", clue: "I use a b_____h to paint a picture.", definition: "brush (n.) ç•«ç­†" },
            { word: "temple", clue: "Many people visit this t_____e to pray for good luck.", definition: "temple (n.) å¯ºå»Ÿ" },
            { word: "shines", clue: "The sun s_____s brightly in the sky.", definition: "shine (v.) é–ƒè€€" },
            { word: "unique", clue: "The artist is famous for his u_____e style.", definition: "unique (adj.) ç¨ç‰¹çš„" },
            { word: "festival", clue: "The music f_____l begins on July 10 this year.", definition: "festival (n.) ç¯€æ…¶" },
            { word: "wheels", clue: "The box moves fast on two w_____s.", definition: "wheel (n.) è¼ªå­" },
            { word: "pull", clue: "P_____l the door to open it; don't push it.", definition: "pull (v.) æ‹‰" },
            { word: "offering", clue: "The company is o_____g Bess a good job.", definition: "offer (v.) çµ¦äºˆ" },
            { word: "bow", clue: "In Japan, people b_____w to show respect.", definition: "bow (v.) é èº¬" },
            { word: "bitter", clue: "The medicine is b_____r, so I don't want to take it.", definition: "bitter (adj.) è‹¦çš„" },
            { word: "shopkeeper", clue: "The s_____r of the bookstore is an old man.", definition: "shopkeeper (n.) è€é—† ; åº—ä¸»" },
            { word: "dead", clue: "The boy is sad because his dog is d_____d.", definition: "dead (adj.) å»ä¸–çš„ ; æ­»äº¡çš„" },
            { word: "ghost", clue: "The g_____t in the movie is very scary.", definition: "ghost (n.) å¹½éˆ ; é¬¼" },
            { word: "tower", clue: "People go up the tall t_____r to see the city.", definition: "tower (n.) å¡”" },
            { word: "clear", clue: "The sky is c_____r and sunny today.", definition: "clear (adj.) æ™´æœ—çš„" },
            { word: "kinds", clue: "There are many k_____s of vegetables at the market.", definition: "kind (n.) ç¨®é¡" },
            { word: "build", clue: "People will b_____d a new library in this city.", definition: "build (v.) å»ºé€ " },
            { word: "create", clue: "Students can c_____e fun stories with their own ideas.", definition: "create (v.) å‰µé€ " },
            { word: "wood", clue: "We use w_____d to make tables and chairs.", definition: "wood (n.) æœ¨é ­" },
            { word: "spread", clue: "The farmer is using a machine to s_____d seeds.", definition: "spread (v.) æ’’ ; æ•£å¸ƒ" },
            { word: "salt", clue: "Add some s_____t, and the soup will taste better.", definition: "salt (n.) é¹½" },
            { word: "slide", clue: "I like to s_____e down the hill on my sled.", definition: "slide (v.) æ»‘" },
            { word: "lesson", clue: "Today's l_____n is about dinosaurs.", definition: "lesson (n.) èª² ; æ•™è¨“" },
            { word: "lie", clue: "You should not l_____e to your parents or friends.", definition: "lie (v.) èªªè¬Š" },
            { word: "experience", clue: "The trip to the zoo is a great e_____e for children.", definition: "experience (n.) ç¶“é©—" },
            { word: "lovely", clue: "The girl has a l_____y smile, and everyone likes her.", definition: "lovely (adj.) æ¼‚äº®çš„ ; å¯æ„›çš„" },
            { word: "sand", clue: "The s_____d on the beach is hot, so we wear sandals.", definition: "sand (n.) æ²™å­" },
            { word: "brave", clue: "The b_____e prince saves the girl from the monster.", definition: "brave (adj.) å‹‡æ•¢çš„" },
            { word: "meters", clue: "The big snake is three m_____s long.", definition: "meter (n.) å…¬å°º" },
            { word: "shark", clue: "Watch out! A s_____k is swimming toward you.", definition: "shark (n.) é¯Šé­š" },
            { word: "sink", clue: "Coins s_____k in water.", definition: "sink (v.) æ²‰" },
            { word: "marry", clue: "John is going to m_____y Jane next month.", definition: "marry (v.) å’Œ...çµå©š" },
            { word: "captain", clue: "My father is the c_____n of the ship.", definition: "captain (n.) èˆ¹é•·" },
            { word: "refuses", clue: "Mary r_____s to lend me her comic books.", definition: "refuse (v.) æ‹’çµ•" },
            { word: "health", clue: "Eating vegetables is good for h_____h.", definition: "health (n.) å¥åº·" },
            { word: "busy", clue: "Tom is b_____y with his science report, so he can't go to the party.", definition: "busy (adj.) å¿™ç¢Œçš„" },
            { word: "parents", clue: "Betty's p_____s love her and take good care of her.", definition: "parents (n.) çˆ¶æ¯ ; çˆ¸çˆ¸åª½åª½" },
            { word: "area", clue: "This a_____a of the city is very busy.", definition: "area (n.) å€åŸŸ" },
            { word: "desert", clue: "Camels can walk for days in the d_____t without water.", definition: "desert (n.) æ²™æ¼ " },
            { word: "ancient", clue: "The a_____t castle is over a thousand years old.", definition: "ancient (adj.) å¤ä»£çš„" },
            { word: "stairs", clue: "People climb lots of s_____s to reach the palace.", definition: "stair (n.) éšæ¢¯" },
            { word: "believe", clue: "They b_____e the story about the lost treasure.", definition: "believe (v.) ç›¸ä¿¡" },
            { word: "fresh", clue: "The dates are f_____h and sweet.", definition: "fresh (adj.) æ–°é®®çš„" },
            { word: "catch", clue: "The man uses a net to c_____h fish.", definition: "catch (v.) æŠ“ä½" },
            { word: "idea", clue: "Billy has a great i_____a for the school party.", definition: "idea (n.) é»å­ ; æƒ³æ³•" },
            { word: "return", clue: "Every winter, the birds r_____n to the warm south.", definition: "return (v.) è¿”å›" },
            { word: "find", clue: "Mom can't f_____d her cellphone. Do you see it anywhere?", definition: "find (v.) æ‰¾åˆ°" },
            { word: "hear", clue: "I can't h_____r you. Can you speak up, please?", definition: "hear (v.) è½è¦‹" },
            { word: "soft", clue: "The sand is s_____t.", definition: "soft (adj.) æŸ”è»Ÿçš„" },
            { word: "wild", clue: "There are many w_____d animals in the forest.", definition: "wild (adj.) é‡ç”Ÿçš„" },
            { word: "paths", clue: "We enjoy walking on the p_____s in the garden.", definition: "path (n.) å°å¾‘" },
            { word: "reach", clue: "You can r_____h the station by bike in ten minutes.", definition: "reach (v.) åˆ°é”" },
            { word: "wide", clue: "The road is very w_____e, so cars can drive fast.", definition: "wide (adj.) å¯¬çš„" },
            { word: "branch", clue: "A monkey is sitting on the b_____h.", definition: "branch (n.) æ¨¹æ" },
            { word: "master", clue: "The old m_____r teaches the young boy to paint.", definition: "master (n.) å¤§å¸«" },
            { word: "precious", clue: "This ring is very p_____s to my grandmother.", definition: "precious (adj.) çè²´çš„" },
            { word: "slow", clue: "Typing 20 words in a minute is s_____w.", definition: "slow (adj.) æ…¢çš„" },
            { word: "tastes", clue: "The fish soup t_____s good.", definition: "taste (v.) å“åš" },
            { word: "next", clue: "The class is English. The n_____t class is math.", definition: "next (adj.) ä¸‹ä¸€å€‹çš„" },
            { word: "attacking", clue: "The soldiers are a_____g the castle.", definition: "attach (v.) æ”»æ“Š" },
            { word: "dream", clue: "I sometimes have a d_____m about flying.", definition: "dream (n.) å¤¢å¢ƒ" },
            { word: "step", clue: "Please don't s_____p on the grass.", definition: "step (v.) è¸" },
            { word: "valley", clue: "We plan to camp in the v_____y and watch the sunrise.", definition: "valley (n.) å±±è°·" },
            { word: "whale", clue: "The w_____e is the largest animal in the world.", definition: "whale (n.) é¯¨é­š" },
            { word: "symbol", clue: "The heart is a s_____l of love.", definition: "symbol (n.) è±¡å¾µ" },
            { word: "waves", clue: "The w_____s today are too strong for swimming.", definition: "wave (n.) æ³¢æµª" },
            { word: "hammer", clue: "We need a h_____r to hit the nail into the wall.", definition: "hammer (n.) æ§Œå­" },
            { word: "sail", clue: "Let's s_____l across the lake on my boat.", definition: "sail (v.) èˆªè¡Œ" },
            { word: "special", clue: "Today is a s_____l day because it's my twentieth birthday.", definition: "special (adj.) ç‰¹åˆ¥çš„" },
            { word: "means", clue: "Marujo m_____s 'sailor' in Portuguese.", definition: "mean (v.) æ„æ€æ˜¯" },
            { word: "artist", clue: "Mary could be a great a_____t because she paints very well.", definition: "artist (n.) è—è¡“å®¶" },
            { word: "earth", clue: "We must take care of the e_____h.", definition: "earth (n.) åœ°çƒ" },
            { word: "think", clue: "I t_____k about my grandpa when I feel sad.", definition: "think (v.) æƒ³" }
        ];

        const posMapping = {
            "n": "åè©",
            "v": "å‹•è©",
            "adj": "å½¢å®¹è©",
            "adv": "å‰¯è©",
            "pron": "ä»£åè©",
            "prep": "ä»‹ç³»è©",
            "conj": "é€£æ¥è©",
            "int": "æ„Ÿå˜†è©",
            "n/v": "åè©ï¼å‹•è©",
            "phr": "ç‰‡èª",
            "v./n": "å‹•è©ï¼åè©"
        };

        const escapeHtml = (unsafe) =>
            unsafe.replace(/[&<>"']/g, (char) => {
                const maps = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;" };
                return maps[char] || char;
            });

        const parseDefinition = (definition) => {
            const match = definition.match(/^(.*?)\s*\((.*?)\)\s*(.+)$/);
            if (!match) {
                return {
                    englishMeaning: definition.trim(),
                    partOfSpeechRaw: "",
                    chineseMeaning: ""
                };
            }
            const [, eng, pos, zh] = match;
            const posKey = pos.replace(/\.+$/, "").trim().toLowerCase();
            return {
                englishMeaning: eng.trim(),
                partOfSpeechRaw: pos.trim(),
                partOfSpeech: posMapping[posKey] || pos.replace(/\.$/, ""),
                posKey,
                chineseMeaning: zh.trim()
            };
        };

        const enrichWords = () =>
            rawWords.map((item, index) => {
                const parsed = parseDefinition(item.definition);
                return {
                    index: index + 1,
                    word: item.word,
                    clue: item.clue,
                    definition: item.definition,
                    ...parsed
                };
            });

        const state = {
            words: enrichWords(),
            filteredWords: [],
            learnedSet: new Set(),
            hiddenChinese: false,
            showBlankSentence: false,
            activePosFilters: new Set(),
            searchKeyword: "",
            wordOrder: []
        };

        const elements = {
            wordGrid: document.getElementById("wordGrid"),
            template: document.getElementById("wordCardTemplate"),
            totalWords: document.getElementById("totalWords"),
            visibleWords: document.getElementById("visibleWords"),
            learnedWords: document.getElementById("learnedWords"),
            posChips: document.getElementById("posChips"),
            searchInput: document.getElementById("searchInput"),
            toggleChineseBtn: document.getElementById("toggleChineseBtn"),
            toggleBlankBtn: document.getElementById("toggleBlankBtn"),
            shuffleBtn: document.getElementById("shuffleBtn"),
            resetBtn: document.getElementById("resetBtn")
        };

        const buildPosFilters = () => {
            const uniquePos = Array.from(
                new Set(state.words.map((word) => word.partOfSpeech || word.partOfSpeechRaw || "å…¶ä»–"))
            ).sort((a, b) => a.localeCompare(b, "zh-Hant"));

            elements.posChips.innerHTML = uniquePos
                .map((label) => `<button class="chip" data-pos="${label}">${label}</button>`)
                .join("");
        };

        const applyFilters = () => {
            const keyword = state.searchKeyword.trim().toLowerCase();
            const hasKeyword = keyword.length > 0;
            const activePos = state.activePosFilters;

            const filtered = state.wordOrder.map((idx) => state.words[idx]).filter((word) => {
                const matchPos = activePos.size === 0 || activePos.has(word.partOfSpeech || word.partOfSpeechRaw || "å…¶ä»–");
                if (!matchPos) return false;

                if (!hasKeyword) return true;

                const sentenceFilled = word.clue.replace(/_+/g, word.word);
                return (
                    word.word.toLowerCase().includes(keyword) ||
                    word.chineseMeaning.toLowerCase().includes(keyword) ||
                    word.definition.toLowerCase().includes(keyword) ||
                    sentenceFilled.toLowerCase().includes(keyword)
                );
            });

            state.filteredWords = filtered;
            renderWords();
        };

        const renderWords = () => {
            if (state.filteredWords.length === 0) {
                elements.wordGrid.innerHTML =
                    `<div class="empty-state">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„å–®å­—ï¼Œè©¦è©¦å…¶ä»–é—œéµå­—æˆ–ç¯©é¸æ¢ä»¶ã€‚</div>`;
                updateStats();
                return;
            }

            const fragment = document.createDocumentFragment();

            state.filteredWords.forEach((item, idx) => {
                const node = elements.template.content.cloneNode(true);
                const card = node.querySelector(".word-card");
                const indexEl = node.querySelector(".word-index");
                const markBtn = node.querySelector(".mark-btn");
                const wordTitle = node.querySelector(".word-text");
                const posTag = node.querySelector(".pos-tag");
                const meaning = node.querySelector(".meaning");
                const sentence = node.querySelector(".sentence");

                if (state.learnedSet.has(item.word)) {
                    card.classList.add("learned");
                    markBtn.classList.add("learned");
                    markBtn.textContent = "âœ… å·²ç†Ÿæ‚‰";
                } else {
                    markBtn.textContent = "â˜† æ¨™è¨˜ç†Ÿæ‚‰";
                }

                indexEl.textContent = `#${String(item.index).padStart(3, "0")}`;
                markBtn.dataset.word = item.word;
                wordTitle.textContent = item.word;
                posTag.textContent = item.partOfSpeech || item.partOfSpeechRaw || "å…¶ä»–";

                if (state.hiddenChinese) {
                    meaning.classList.add("hidden");
                    meaning.textContent = "ä¸­æ–‡å·²éš±è—ï¼Œé»é¸ä¸Šæ–¹æŒ‰éˆ•é¡¯ç¤º";
                } else {
                    meaning.classList.remove("hidden");
                    meaning.textContent = item.chineseMeaning || item.definition;
                }

                const escapedClue = escapeHtml(item.clue);
                const sentenceHtml = state.showBlankSentence
                    ? escapedClue
                    : escapedClue.replace(/_+/g, `<mark class="fill">${escapeHtml(item.word)}</mark>`);

                sentence.innerHTML = sentenceHtml;

                fragment.appendChild(node);
            });

            elements.wordGrid.innerHTML = "";
            elements.wordGrid.appendChild(fragment);
            updateStats();
        };

        const updateStats = () => {
            elements.totalWords.textContent = state.words.length;
            elements.visibleWords.textContent = state.filteredWords.length;
            elements.learnedWords.textContent = state.learnedSet.size;
        };

        const shuffleOrder = () => {
            for (let i = state.wordOrder.length - 1; i > 0; i -= 1) {
                const j = Math.floor(Math.random() * (i + 1));
                [state.wordOrder[i], state.wordOrder[j]] = [state.wordOrder[j], state.wordOrder[i]];
            }
        };

        const resetAll = () => {
            state.learnedSet.clear();
            state.activePosFilters.clear();
            elements.searchInput.value = "";
            state.searchKeyword = "";
            state.hiddenChinese = false;
            state.showBlankSentence = false;

            elements.toggleChineseBtn.classList.remove("active");
            elements.toggleBlankBtn.classList.remove("active");

            Array.from(elements.posChips.querySelectorAll(".chip")).forEach((chip) =>
                chip.classList.remove("active")
            );

            state.wordOrder = state.words.map((_, idx) => idx);
            applyFilters();
        };

        const init = () => {
            buildPosFilters();
            state.wordOrder = state.words.map((_, idx) => idx);
            applyFilters();

            elements.searchInput.addEventListener("input", (event) => {
                state.searchKeyword = event.target.value;
                applyFilters();
            });

            elements.posChips.addEventListener("click", (event) => {
                const chip = event.target.closest(".chip");
                if (!chip) return;
                const label = chip.dataset.pos;
                if (chip.classList.contains("active")) {
                    chip.classList.remove("active");
                    state.activePosFilters.delete(label);
                } else {
                    chip.classList.add("active");
                    state.activePosFilters.add(label);
                }
                applyFilters();
            });

            elements.wordGrid.addEventListener("click", (event) => {
                const button = event.target.closest(".mark-btn");
                if (!button) return;
                const word = button.dataset.word;
                if (state.learnedSet.has(word)) {
                    state.learnedSet.delete(word);
                } else {
                    state.learnedSet.add(word);
                }
                renderWords();
            });

            elements.toggleChineseBtn.addEventListener("click", () => {
                state.hiddenChinese = !state.hiddenChinese;
                elements.toggleChineseBtn.classList.toggle("active", state.hiddenChinese);
                renderWords();
            });

            elements.toggleBlankBtn.addEventListener("click", () => {
                state.showBlankSentence = !state.showBlankSentence;
                elements.toggleBlankBtn.classList.toggle("active", state.showBlankSentence);
                renderWords();
            });

            elements.shuffleBtn.addEventListener("click", () => {
                shuffleOrder();
                applyFilters();
            });

            elements.resetBtn.addEventListener("click", () => resetAll());
        };

        init();
    </script>
</body>

</html>